/* user-myjd/home/common/1.0.1 common.js Date:2019-02-19 15:39:18 */
seajs.use(["//misc.360buyimg.com/jdf/1.0.0/unit/globalInit/5.0.0/globalInit.js","//misc.360buyimg.com/jdf/1.0.0/unit/hotwords/5.0.0/hotwords","//misc.360buyimg.com/jdf/1.0.0/ui/dialog/1.0.0/dialog"],function(a,b){a(),b(),function(){var a=function(){var a=void 0,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");for(;c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:a}();var b="undefined"!=typeof a&&9>a;var c="undefined"!=typeof a&&8===a?"https://www.jd.com/":"https://www.jd.com/allSort.aspx";var d='      <div id="ie6tip">        <div class="left-con">          <div></div>        </div>        <div class="right-con">          <div class="tip1">\u60a8\u7684\u6d4f\u89c8\u5668\u7248\u672c\u8fc7\u4f4e\uff0c\u53ef\u80fd\u5b58\u5728\u5b89\u5168\u98ce\u9669</div>          <div class="tip2">\u5efa\u8bae\u60a8\u4f7f\u7528\u4ee5\u4e0b\u6d4f\u89c8\u5668\uff1a</div>          <ul class="clearfix">            <li class="chrome">                <a class="img" href="https://www.google.cn/chrome/browser" target="_blank"></a>                <div class="title">\u8c37\u6b4c\u6d4f\u89c8\u5668</div>                <div class="btn"><a href="https://www.google.cn/chrome/browser" target="_blank">\u4e0b\u8f7d</a></div>            </li>            <li class="qq">                <a class="img" href="https://browser.qq.com" target="_blank"></a>                <div class="title">QQ\u6d4f\u89c8\u5668</div>                <div class="btn"><a href="https://browser.qq.com" target="_blank">\u4e0b\u8f7d</a></div>            </li>            <li class="ie">                <a class="img" href="https://www.microsoft.com/zh-cn/download/internet-explorer.aspx" target="_blank"></a>                <div class="title">IE\u6d4f\u89c8\u5668</div>                <div class="btn"><a href="https://www.microsoft.com/zh-cn/download/internet-explorer.aspx" target="_blank">\u4e0b\u8f7d</a></div>            </li>          </ul>          <a class="continue" href="'+c+'">\u7ee7\u7eed\u8bbf\u95ee\u4eac\u4e1c<span>&gt;</span></a>        </div>      </div>';b&&($("body").dialog({closeButton:!1,width:690,height:320,title:"\u5b89\u5168\u63d0\u793a",opacity:.9,type:"html",source:d}),document.documentElement.style.overflow="hidden")}();var d={init:function(){this.setSelectItem(),this.setPopSize(),this.bindEvent(),this.loadExtraMenu()},setSelectItem:function(){var a=$("body").attr("myjd");$("#"+a).addClass("curr")},setPopSize:function(){var a=$(".menu dd[tid=_MYJD_menu_more] .myjd-popup");$.each(a,function(){var a=$(this);var b=a.outerHeight();a.css({height:b,"margin-top":b/-2})})},loadExtraMenu:function(){$("body").attr("myjd");$.ajax({url:"//joycenter.jd.com/msgCenter/getUnreadNum.action",dataType:"jsonp",success:function(a){if(a.msgUnreadCount){var b=a.msgUnreadCount>99?"99+":a.msgUnreadCount;$("span[tid=_MYJD_message]").append("<i>"+b+"</i>")}}}),$.ajax({url:"//corp.jd.com/publicSoa/userInfo/getUserLevel",dataType:"jsonp",data:{pin:decodeURIComponent(readCookie("pin"))},success:function(a){if(a.success&&90==a.userLevel){var b='<a tid="_MYJD_qyfp" clstag="homepage|keycount|header_1530066058149|32" href="//corp.jd.com/invoice/commonlist" target="_self"><span>\u4f01\u4e1a\u53d1\u7968</span></a><a tid="_MYJD_cgxq" clstag="homepage|keycount|header_1530066058149|33" href="//kw.jd.com/" target="_self"><span>\u91c7\u8d2d\u9700\u6c42\u5355</span></a>';$("#nav .navitems .myjd-set .dd .inner").append(b),$("#_MYJD_credit a").attr("href","//jc.jd.com").html("\u4f01\u4e1a\u91d1\u91c6")}}}),$.ajax({url:"//home.jd.com/2014/data/user/isUserRealNameAuth.action",dataType:"jsonp",success:function(a){if(0===a){var b='<span style="position: absolute;right: -100px;top: -10px;font-size: 12px;color: #df3028;background-color: #fff;border: 1px solid #df3028;border-radius:10px;width: 88px;height: 18px;line-height: 18px;text-align: center;padding: 0 5px;">\u5b9e\u540d\u8ba4\u8bc1\u540e\u53ef\u7528</span>';$("#_MYJD_bean a").append(b)}}})},bindEvent:function(){var a;$(".navitems .dl").hover(function(){var b=this;clearTimeout(a),a=setTimeout(function(){$(b).addClass("hover")},300)},function(){var b=this;clearTimeout(a),$(b).removeClass("hover")})}};d.init()});